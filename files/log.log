[2024-05-23 12:10:44] INFO
Bot: food2mood - \u0435\u0434\u0430 \u043f\u043e\u0434 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0435 [@food2mood_bot]
[2024-05-23 12:10:44] INFO
Start polling.
[2024-05-23 12:13:29] ERROR
Task exception was never retrieved
future: <Task finished name='Task-96' coro=<Dispatcher._process_polling_updates() done, defined at C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py:407> exception=ConnectTimeout(MaxRetryError("HTTPSConnectionPool(host='bothub.chat', port=443): Max retries exceeded with url: /api/v1/dev/chat/completion/sync (Caused by ConnectTimeoutError(<urllib3.connection.HTTPSConnection object at 0x00000158A025F160>, 'Connection to bothub.chat timed out. (connect timeout=None)'))"))>
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\urllib3\connection.py", line 198, in _new_conn
    sock = connection.create_connection(
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\urllib3\util\connection.py", line 85, in create_connection
    raise err
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\urllib3\util\connection.py", line 73, in create_connection
    sock.connect(sa)
TimeoutError: [WinError 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\urllib3\connectionpool.py", line 793, in urlopen
    response = self._make_request(
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\urllib3\connectionpool.py", line 491, in _make_request
    raise new_e
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\urllib3\connectionpool.py", line 467, in _make_request
    self._validate_conn(conn)
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\urllib3\connectionpool.py", line 1099, in _validate_conn
    conn.connect()
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\urllib3\connection.py", line 616, in connect
    self.sock = sock = self._new_conn()
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\urllib3\connection.py", line 207, in _new_conn
    raise ConnectTimeoutError(
urllib3.exceptions.ConnectTimeoutError: (<urllib3.connection.HTTPSConnection object at 0x00000158A025F160>, 'Connection to bothub.chat timed out. (connect timeout=None)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\requests\adapters.py", line 486, in send
    resp = conn.urlopen(
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\urllib3\connectionpool.py", line 847, in urlopen
    retries = retries.increment(
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\urllib3\util\retry.py", line 515, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='bothub.chat', port=443): Max retries exceeded with url: /api/v1/dev/chat/completion/sync (Caused by ConnectTimeoutError(<urllib3.connection.HTTPSConnection object at 0x00000158A025F160>, 'Connection to bothub.chat timed out. (connect timeout=None)'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 415, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 235, in process_updates
    return await asyncio.gather(*tasks)
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\aiogram\dispatcher\handler.py", line 117, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 283, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\aiogram\dispatcher\handler.py", line 117, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "C:\Users\Administrator\Desktop\food2mood\handlers\menu_food.py", line 703, in food_category
    dish, length, numb = menu.get_dish(user)
  File "C:\Users\Administrator\Desktop\food2mood\menu.py", line 138, in get_dish
    return read_table(restaurant[0], category, mood, style, rec, blacklist, numb)
  File "C:\Users\Administrator\Desktop\food2mood\menu.py", line 90, in read_table
    if check_blacklist_with_ai(blacklist, dish_ingredients):
  File "C:\Users\Administrator\Desktop\food2mood\menu.py", line 168, in check_blacklist_with_ai
    response = bothubClient.post("https://bothub.chat/api/v1/dev/chat/completion/sync", json={
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\requests\sessions.py", line 637, in post
    return self.request("POST", url, data=data, json=json, **kwargs)
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\requests\sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\requests\sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\requests\adapters.py", line 507, in send
    raise ConnectTimeout(e, request=request)
requests.exceptions.ConnectTimeout: HTTPSConnectionPool(host='bothub.chat', port=443): Max retries exceeded with url: /api/v1/dev/chat/completion/sync (Caused by ConnectTimeoutError(<urllib3.connection.HTTPSConnection object at 0x00000158A025F160>, 'Connection to bothub.chat timed out. (connect timeout=None)'))
[2024-05-23 12:17:21] ERROR
Task exception was never retrieved
future: <Task finished name='Task-334' coro=<Dispatcher._process_polling_updates() done, defined at C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py:407> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 415, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 235, in process_updates
    return await asyncio.gather(*tasks)
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\aiogram\dispatcher\handler.py", line 117, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 283, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "C:\Users\Administrator\Desktop\food2mood\venv\lib\site-packages\aiogram\dispatcher\handler.py", line 117, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "C:\Users\Administrator\Desktop\food2mood\handlers\menu_food.py", line 724, in food_category
    f"\U0001f4dd\u041d\u0430 100 \u0433\u0440: <tg-spoiler><i>{dish['\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435'].split(';')[1]}</i></tg-spoiler>\n"
IndexError: list index out of range
